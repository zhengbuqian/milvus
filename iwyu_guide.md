使用 internal/core/run_iwyu.sh 脚本，处理和修复cpp文件和头文件，包括测试文件和业务代码文件。

1. 先收集和列举所有的cpp文件和头文件，包括测试文件和业务代码文件， 写到一个 .md 文件内记录进度， 每个文件一个 check box。
2. 我已经处理了一部分的文件， 起一个 subagent 阅读 IWYU_PROGRESS_REPORT.md 并把所有已经完成的文件打勾。
3. 进入循环：每次先起一个 subagent 阅读我们的进度记录文件，返回 22 个下一批次需要处理的文件， 然后再另起一个 subagent 处理这22 个文件。
   这个 subagent 的工作包括: 1. 分析、修复这些文件, 2. 运行 ./compile.sh compile 确认可以编译， 3. 然后 commit这些修改,之后不再回退所有commit过的文件, 4. 如果有不好处理的文件导致iwyu很难处理或者编译失败，先跳过这些文件并把他们恢复原样，再重新编译确认能编译后把能处理的文件commit。然后在进度文件中给能处理的打钩，不能处理的打叉。
4. 每次处理完22个文件后，更新进度文件，并 commit 进度文件。

iwyu分析和处理的时候，倾向于使用include而不是前向声明，可以的话，使用 --no_fwd_decls，除非include会造成循环，只有前向声明能解决。

如果你刚刚经历了上下文 compaction， 复习上面的内容。
