# Scalar Benchmark ç»“æœç»„ç»‡æ–¹å¼é‡æ„è®¡åˆ’

## æ–‡æ¡£ä¿¡æ¯
- **åˆ›å»ºæ—¥æœŸ**: 2025-01-12
- **çŠ¶æ€**: è®¡åˆ’ä¸­
- **ç›®æ ‡ç‰ˆæœ¬**: 2.0

## æ¦‚è¿°

æœ¬æ–‡æ¡£æè¿°äº† scalar benchmark ç»“æœç»„ç»‡æ–¹å¼çš„é‡æ„è®¡åˆ’ï¼Œä»å½“å‰çš„æ‰å¹³"Run"ç»“æ„æ”¹ä¸ºå±‚æ¬¡åŒ–çš„"Bundle-Case-Suite"ç»“æ„ã€‚ç›®æ ‡æ˜¯æä¾›æ›´å¥½çš„æµ‹è¯•ç»“æœç»„ç»‡æ–¹å¼ï¼Œç›´æ¥æ˜ å°„åˆ° YAML é…ç½®æ–‡ä»¶ï¼Œå¹¶æ”¹è¿› UI å¯¼èˆªå’Œå¯¹æ¯”åŠŸèƒ½ã€‚

---

## 1. å½“å‰æ¶æ„

### 1.1 å½“å‰ç»“æ„

```
Run (åŸºäºæ—¶é—´æˆ³)
â””â”€â”€ Cases (æ‰å¹³åˆ—è¡¨)
    â”œâ”€â”€ Case 1 (data_config, index_config, expression)
    â”œâ”€â”€ Case 2
    â””â”€â”€ Case 3
```

### 1.2 å½“å‰æ–‡ä»¶ç»„ç»‡

```
results/
â”œâ”€â”€ index.json
â””â”€â”€ <run_id>/
    â”œâ”€â”€ meta.json
    â”œâ”€â”€ metrics.json
    â”œâ”€â”€ run_summary.txt
    â”œâ”€â”€ benchmark_results.csv
    â””â”€â”€ flamegraphs/
        â””â”€â”€ <case_id>.svg
```

### 1.3 å½“å‰ UI é¡µé¢

1. **RunsPage** (`/runs`)ï¼š
   - åˆ—å‡ºæ‰€æœ‰åŸºå‡†æµ‹è¯•è¿è¡Œ
   - å¯å±•å¼€çš„å†…è” case è¡¨æ ¼
   - å…è®¸é€‰æ‹© run è¿›è¡Œå¯¹æ¯”

2. **RunDetailPage** (`/run/:runId`)ï¼š
   - æ˜¾ç¤ºå•ä¸ª run çš„å…ƒæ•°æ®
   - æ‰€æœ‰ cases çš„ DatasetCharts
   - ç»Ÿä¸€çš„ case æŒ‡æ ‡è¡¨æ ¼
   - æ‰€æœ‰ç«ç„°å›¾çš„æ±‡æ€»å±•ç¤º

3. **ComparePage** (`/compare`)ï¼š
   - å¹¶æ’å¯¹æ¯”é€‰ä¸­çš„ runs æˆ– cases

### 1.4 å½“å‰æ¶æ„çš„é—®é¢˜

1. **æ—  YAML-ç»“æœæ˜ å°„**ï¼šæ— æ³•è½»æ¾çœ‹åˆ°å“ªä¸ª YAML é…ç½®äº§ç”Ÿäº†å“ªäº›ç»“æœ
2. **æ‰å¹³çš„ case ç»“æ„**ï¼šæ²¡æœ‰æŒ‰ YAML ä¸­å®šä¹‰çš„é€»è¾‘æµ‹è¯•ç”¨ä¾‹åˆ†ç»„
3. **Suite ä¸å¯è§**ï¼šä¸€ä¸ª case ä¸­çš„å¤šä¸ª suite æ— æ³•åŒºåˆ†
4. **å¯¼èˆªé—®é¢˜**ï¼šæ— æ³•ä»é…ç½®ç»“æ„å¯¼èˆªåˆ°ç»“æœ
5. **å¯¹æ¯”å›°éš¾**ï¼šéš¾ä»¥è·¨ bundle å¯¹æ¯”ç‰¹å®šçš„ cases

---

## 2. ç›®æ ‡æ¶æ„

### 2.1 æ–°çš„å±‚æ¬¡åŒ–ç»“æ„

```
Bundle (YAML é…ç½®æ–‡ä»¶)
â”œâ”€â”€ Bundle å…ƒæ•°æ®
â”‚   â”œâ”€â”€ config_file: "bool/equal.yaml"
â”‚   â”œâ”€â”€ bundle_id: <æ—¶é—´æˆ³>
â”‚   â”œâ”€â”€ timestamp_ms: 1704067200000
â”‚   â””â”€â”€ cases: [case1, case2, ...]
â”‚
â””â”€â”€ Cases (YAML ä¸­å®šä¹‰)
    â”œâ”€â”€ Case 1: "bool_equal"
    â”‚   â”œâ”€â”€ Case å…ƒæ•°æ®
    â”‚   â”‚   â”œâ”€â”€ case_name: "bool_equal"
    â”‚   â”‚   â”œâ”€â”€ case_id: <å”¯ä¸€ID>
    â”‚   â”‚   â””â”€â”€ suites: [suite1, suite2]
    â”‚   â”‚
    â”‚   â””â”€â”€ Suites (æ‰§è¡Œç»“æœï¼Œåœ¨ UI ä¸­åˆå¹¶)
    â”‚       â”œâ”€â”€ Suite 1: "default"
    â”‚       â”‚   â”œâ”€â”€ æ•°æ®é…ç½®: [balanced, skewed_9010]
    â”‚       â”‚   â”œâ”€â”€ ç´¢å¼•é…ç½®: [no_index, bitmap_index]
    â”‚       â”‚   â””â”€â”€ è¡¨è¾¾å¼: [good_equal_true, good_not_equal_true]
    â”‚       â”‚
    â”‚       â””â”€â”€ Suite 2: "high_selectivity"
    â”‚           â”œâ”€â”€ æ•°æ®é…ç½®: [most_true]
    â”‚           â”œâ”€â”€ ç´¢å¼•é…ç½®: [inverted_index]
    â”‚           â””â”€â”€ è¡¨è¾¾å¼: [good_equal_false]
    â”‚
    â””â”€â”€ Case 2: "bool_not_equal"
        â””â”€â”€ ...
```

### 2.2 æ ¸å¿ƒæ¦‚å¿µ

#### Bundleï¼ˆæµ‹è¯•åŒ…ï¼‰
- **å®šä¹‰**ï¼šå•ä¸ª YAML é…ç½®æ–‡ä»¶çš„å®Œæ•´æµ‹è¯•æ‰§è¡Œ
- **æ ‡è¯†**ï¼šå”¯ä¸€çš„ bundle_idï¼ˆæ—¶é—´æˆ³ï¼‰+ config_file è·¯å¾„
- **åŒ…å«**ï¼šYAML æ–‡ä»¶ä¸­å®šä¹‰çš„å¤šä¸ª cases
- **ç”¨é€”**ï¼šç»“æœç»„ç»‡å’Œå¯¹æ¯”çš„é¡¶å±‚å•å…ƒ

#### Caseï¼ˆæµ‹è¯•ç”¨ä¾‹ï¼‰
- **å®šä¹‰**ï¼šYAML `cases:[]` æ•°ç»„ä¸­å®šä¹‰çš„é€»è¾‘æµ‹è¯•ç”¨ä¾‹
- **æ ‡è¯†**ï¼šcase_nameï¼ˆæ¥è‡ª YAMLï¼‰+ case_idï¼ˆbundle å†…å”¯ä¸€ï¼‰
- **åŒ…å«**ï¼šå¤šä¸ª suites åŠå…¶æµ‹è¯•ç»“æœ
- **ç”¨é€”**ï¼šç›¸å…³æµ‹è¯•çš„ä¸­å±‚åˆ†ç»„ï¼Œä½¿ç”¨ä¸åŒçš„æ•°æ®/ç´¢å¼•ç»„åˆ

#### Suiteï¼ˆæµ‹è¯•å¥—ä»¶ï¼‰
- **å®šä¹‰**ï¼šYAML case å†… `suites:[]` æ•°ç»„ä¸­å®šä¹‰çš„æµ‹è¯•å¥—ä»¶
- **æ ‡è¯†**ï¼šsuite_nameï¼ˆæ¥è‡ª YAMLï¼‰
- **åŒ…å«**ï¼š(data_configs Ã— index_configs Ã— expressions) çš„ç¬›å¡å°”ç§¯
- **ç”¨é€”**ï¼šæ‰§è¡Œå•å…ƒï¼Œä½†åœ¨ UI ä¸­ç»“æœä¼šåˆå¹¶åˆ° case çº§åˆ«è§†å›¾

### 2.3 æ–°çš„æ–‡ä»¶ç»„ç»‡

```
results/
â”œâ”€â”€ index.json                          # åˆ—å‡ºæ‰€æœ‰ bundles
â”‚   {
â”‚     "bundles": [
â”‚       {
â”‚         "bundle_id": "1704067200000",
â”‚         "config_file": "bool/equal.yaml",
â”‚         "timestamp_ms": 1704067200000,
â”‚         "label": "å¸ƒå°”ç›¸ç­‰æ€§æµ‹è¯•",
â”‚         "cases": ["bool_equal", "bool_not_equal"]
â”‚       }
â”‚     ]
â”‚   }
â”‚
â””â”€â”€ <bundle_id>/
    â”œâ”€â”€ bundle_meta.json                # Bundle çº§åˆ«å…ƒæ•°æ®
    â”‚   {
    â”‚     "bundle_id": "1704067200000",
    â”‚     "config_file": "bool/equal.yaml",
    â”‚     "config_content": "<yaml å†…å®¹>",
    â”‚     "timestamp_ms": 1704067200000,
    â”‚     "test_params": {...},
    â”‚     "cases": [
    â”‚       {
    â”‚         "case_name": "bool_equal",
    â”‚         "case_id": "1704067200000_0",
    â”‚         "suites": ["default", "high_selectivity"]
    â”‚       }
    â”‚     ]
    â”‚   }
    â”‚
    â”œâ”€â”€ bundle_summary.txt              # æ•´ä½“æ‘˜è¦
    â”‚
    â”œâ”€â”€ cases/
    â”‚   â”œâ”€â”€ <case_id>/
    â”‚   â”‚   â”œâ”€â”€ case_meta.json          # Case çº§åˆ«å…ƒæ•°æ®
    â”‚   â”‚   â”‚   {
    â”‚   â”‚   â”‚     "case_id": "1704067200000_0",
    â”‚   â”‚   â”‚     "case_name": "bool_equal",
    â”‚   â”‚   â”‚     "bundle_id": "1704067200000",
    â”‚   â”‚   â”‚     "suites": [
    â”‚   â”‚   â”‚       {
    â”‚   â”‚   â”‚         "suite_name": "default",
    â”‚   â”‚   â”‚         "data_configs": ["balanced", "skewed_9010"],
    â”‚   â”‚   â”‚         "index_configs": ["no_index", "bitmap_index"],
    â”‚   â”‚   â”‚         "expr_templates": ["good_equal_true"]
    â”‚   â”‚   â”‚       }
    â”‚   â”‚   â”‚     ],
    â”‚   â”‚   â”‚     "total_tests": 8,
    â”‚   â”‚   â”‚     "has_flamegraphs": true
    â”‚   â”‚   â”‚   }
    â”‚   â”‚   â”‚
    â”‚   â”‚   â”œâ”€â”€ case_metrics.json       # æ‰€æœ‰ suites çš„åˆå¹¶æŒ‡æ ‡
    â”‚   â”‚   â”‚   {
    â”‚   â”‚   â”‚     "tests": [
    â”‚   â”‚   â”‚       {
    â”‚   â”‚   â”‚         "test_id": "0001",
    â”‚   â”‚   â”‚         "suite_name": "default",
    â”‚   â”‚   â”‚         "data_config": "balanced",
    â”‚   â”‚   â”‚         "index_config": "no_index",
    â”‚   â”‚   â”‚         "expression": "good == true",
    â”‚   â”‚   â”‚         "qps": 12345,
    â”‚   â”‚   â”‚         "latency_ms": {...},
    â”‚   â”‚   â”‚         "selectivity": 0.5,
    â”‚   â”‚   â”‚         "flamegraph": "flamegraphs/0001.svg"
    â”‚   â”‚   â”‚       }
    â”‚   â”‚   â”‚     ]
    â”‚   â”‚   â”‚   }
    â”‚   â”‚   â”‚
    â”‚   â”‚   â”œâ”€â”€ case_summary.txt        # Case ç‰¹å®šçš„æ‘˜è¦
    â”‚   â”‚   â”‚
    â”‚   â”‚   â”œâ”€â”€ case_results.csv        # æ­¤ case çš„ CSV å¯¼å‡º
    â”‚   â”‚   â”‚
    â”‚   â”‚   â””â”€â”€ flamegraphs/
    â”‚   â”‚       â”œâ”€â”€ 0001.svg
    â”‚   â”‚       â””â”€â”€ 0002.svg
    â”‚   â”‚
    â”‚   â””â”€â”€ <case_id_2>/
    â”‚       â””â”€â”€ ...
    â”‚
    â””â”€â”€ all_results.csv                 # æ•´ä¸ª bundle çš„åˆå¹¶ CSV
```

### 2.4 æ–°çš„ UI ç»“æ„

#### 2.4.1 ä¸»é¡µé¢ï¼šBundles åˆ—è¡¨ (`/bundles`)

**ç”¨é€”**ï¼šå…¥å£é¡µé¢ï¼Œæ˜¾ç¤ºæ‰€æœ‰æµ‹è¯• bundles

**å¸ƒå±€**ï¼š
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Scalar åŸºå‡†æµ‹è¯•ç»“æœ                            [åˆ·æ–°]       â”‚
â”‚                                                               â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ [â–¼] bool/equal.yaml - 2025-01-01 10:00:00            â”‚   â”‚
â”‚ â”‚     Bundle ID: 1704067200000                          â”‚   â”‚
â”‚ â”‚     2 ä¸ªç”¨ä¾‹ | æ€»è®¡ 15 ä¸ªæµ‹è¯•                          â”‚   â”‚
â”‚ â”‚                                        [æŸ¥çœ‹ Bundle] â”‚   â”‚
â”‚ â”‚                                                        â”‚   â”‚
â”‚ â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚ â”‚     â”‚ ç”¨ä¾‹: bool_equal                   [è¯¦æƒ…] â”‚  â”‚   â”‚
â”‚ â”‚     â”‚ 2 ä¸ªå¥—ä»¶ | 8 ä¸ªæµ‹è¯•                         â”‚  â”‚   â”‚
â”‚ â”‚     â”‚ QPS èŒƒå›´: 10K - 50K                         â”‚  â”‚   â”‚
â”‚ â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚ â”‚                                                        â”‚   â”‚
â”‚ â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚ â”‚     â”‚ ç”¨ä¾‹: bool_not_equal               [è¯¦æƒ…] â”‚  â”‚   â”‚
â”‚ â”‚     â”‚ 1 ä¸ªå¥—ä»¶ | 7 ä¸ªæµ‹è¯•                          â”‚  â”‚   â”‚
â”‚ â”‚     â”‚ QPS èŒƒå›´: 15K - 45K                         â”‚  â”‚   â”‚
â”‚ â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                               â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ [â–º] array/array.yaml - 2025-01-01 09:00:00            â”‚   â”‚
â”‚ â”‚     Bundle ID: 1704063600000                          â”‚   â”‚
â”‚ â”‚     4 ä¸ªç”¨ä¾‹ | æ€»è®¡ 64 ä¸ªæµ‹è¯•                          â”‚   â”‚
â”‚ â”‚                                        [æŸ¥çœ‹ Bundle] â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**åŠŸèƒ½ç‰¹æ€§**ï¼š
- å¯å±•å¼€çš„ bundle å¡ç‰‡
- æ˜¾ç¤ºé…ç½®æ–‡ä»¶è·¯å¾„å’Œæ‰§è¡Œæ—¶é—´
- åµŒå¥—çš„ case åˆ—è¡¨ï¼Œå¸¦å¿«é€ŸæŒ‡æ ‡
- ç›´æ¥é“¾æ¥åˆ° Bundle Detail å’Œ Case Detail é¡µé¢
- æŒ‰é…ç½®æ–‡ä»¶ã€æ—¥æœŸèŒƒå›´ã€case åç§°è¿‡æ»¤

#### 2.4.2 Bundle è¯¦æƒ…é¡µ (`/bundle/:bundleId`)

**ç”¨é€”**ï¼šBundle å†…æ‰€æœ‰ cases çš„æ¦‚è§ˆ

**å¸ƒå±€**ï¼š
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â† è¿”å› Bundles                                              â”‚
â”‚                                                               â”‚
â”‚ Bundle: bool/equal.yaml                                       â”‚
â”‚ æ‰§è¡Œæ—¶é—´: 2025-01-01 10:00:00                                â”‚
â”‚ Bundle ID: 1704067200000                                      â”‚
â”‚                                                               â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Bundle é…ç½®                                              â”‚ â”‚
â”‚ â”‚ â”œâ”€ æµ‹è¯•è¿­ä»£: 100                                         â”‚ â”‚
â”‚ â”‚ â”œâ”€ é¢„çƒ­è¿­ä»£: 30                                          â”‚ â”‚
â”‚ â”‚ â”œâ”€ æ€»ç”¨ä¾‹æ•°: 2                                           â”‚ â”‚
â”‚ â”‚ â””â”€ æ€»æµ‹è¯•æ•°: 15                                          â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                               â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ [â–¼] ç”¨ä¾‹: bool_equal                        [æ‰“å¼€ç”¨ä¾‹] â”‚ â”‚
â”‚ â”‚                                                          â”‚ â”‚
â”‚ â”‚     Case ID: 1704067200000_0                            â”‚ â”‚
â”‚ â”‚     å¥—ä»¶: default, high_selectivity                     â”‚ â”‚
â”‚ â”‚     æ€»æµ‹è¯•æ•°: 8                                          â”‚ â”‚
â”‚ â”‚                                                          â”‚ â”‚
â”‚ â”‚     ğŸ“Š å›¾è¡¨                                              â”‚ â”‚
â”‚ â”‚     [æŒ‰ç´¢å¼•åˆ†ç»„çš„ QPS] [å»¶è¿Ÿåˆ†å¸ƒ] [é€‰æ‹©ç‡]              â”‚ â”‚
â”‚ â”‚                                                          â”‚ â”‚
â”‚ â”‚     ğŸ“‹ æµ‹è¯•ç»“æœ (é»˜è®¤æŠ˜å )                               â”‚ â”‚
â”‚ â”‚     [æ˜¾ç¤º/éšè—è¡¨æ ¼]                                      â”‚ â”‚
â”‚ â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚
â”‚ â”‚     â”‚ å¥—ä»¶    â”‚ æ•°æ®     â”‚ ç´¢å¼•   â”‚ QPS   â”‚ P99  â”‚   â”‚ â”‚
â”‚ â”‚     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¤   â”‚ â”‚
â”‚ â”‚     â”‚ default â”‚ balanced â”‚ no_idx â”‚ 25.3K â”‚ 0.8  â”‚   â”‚ â”‚
â”‚ â”‚     â”‚ default â”‚ balanced â”‚ bitmap â”‚ 45.1K â”‚ 0.4  â”‚   â”‚ â”‚
â”‚ â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                               â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ [â–º] ç”¨ä¾‹: bool_not_equal                    [æ‰“å¼€ç”¨ä¾‹] â”‚ â”‚
â”‚ â”‚     (å·²æŠ˜å )                                             â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**åŠŸèƒ½ç‰¹æ€§**ï¼š
- Bundle é…ç½®æ¦‚è§ˆ
- æ¯ä¸ª case æ˜¾ç¤ºä¸ºå¯å±•å¼€çš„åŒºå—
- æ¯ä¸ª case çš„å›¾è¡¨å’Œè¡¨æ ¼ï¼ˆé»˜è®¤æŠ˜å ï¼‰
- ä¸æ˜¾ç¤ºç«ç„°å›¾ï¼ˆåœ¨ Case Detail ä¸­æŸ¥çœ‹ï¼‰
- å¿«é€Ÿå¯¼èˆªåˆ°å„ä¸ª Case Detail é¡µé¢
- å¯¼å‡º bundle çº§åˆ«çš„ CSV

#### 2.4.3 Case è¯¦æƒ…é¡µ (`/bundle/:bundleId/case/:caseId`)

**ç”¨é€”**ï¼šå•ä¸ª case çš„è¯¦ç»†è§†å›¾ï¼ŒåŒ…å«æ‰€æœ‰æµ‹è¯•ç»“æœ

**å¸ƒå±€**ï¼š
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â† è¿”å› Bundle                                               â”‚
â”‚                                                               â”‚
â”‚ ç”¨ä¾‹: bool_equal                                              â”‚
â”‚ Bundle: bool/equal.yaml                                       â”‚
â”‚ Case ID: 1704067200000_0                                      â”‚
â”‚                                                               â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ç”¨ä¾‹é…ç½®                                                 â”‚ â”‚
â”‚ â”‚ â”œâ”€ å¥—ä»¶: default, high_selectivity                       â”‚ â”‚
â”‚ â”‚ â”œâ”€ æ€»æµ‹è¯•æ•°: 8                                           â”‚ â”‚
â”‚ â”‚ â”œâ”€ æ•°æ®é…ç½®: balanced, skewed_9010, most_true            â”‚ â”‚
â”‚ â”‚ â”œâ”€ ç´¢å¼•é…ç½®: no_index, bitmap_index, inverted_index     â”‚ â”‚
â”‚ â”‚ â””â”€ è¡¨è¾¾å¼: good == true, good != true                    â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                               â”‚
â”‚ ğŸ“Š æ€§èƒ½å›¾è¡¨                                                   â”‚
â”‚ [æŒ‰æ•°æ®é…ç½®çš„ QPS] [æŒ‰ç´¢å¼•çš„å»¶è¿Ÿ] [é€‰æ‹©ç‡]                   â”‚
â”‚                                                               â”‚
â”‚ ğŸ“‹ æµ‹è¯•ç»“æœ                                                   â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ å¥—ä»¶    â”‚ æ•°æ®     â”‚ ç´¢å¼•      â”‚ è¡¨è¾¾å¼      â”‚ QPS   â”‚...â”‚ â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”¤ â”‚
â”‚ â”‚ default â”‚ balanced â”‚ no_index â”‚ good==true  â”‚ 25.3K â”‚...â”‚ â”‚
â”‚ â”‚ default â”‚ balanced â”‚ bitmap   â”‚ good==true  â”‚ 45.1K â”‚...â”‚ â”‚
â”‚ â”‚ default â”‚ skewed   â”‚ no_index â”‚ good==true  â”‚ 28.7K â”‚...â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                               â”‚
â”‚ ğŸ”¥ ç«ç„°å›¾ (å¦‚æœå¯ç”¨)                                          â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚ â”‚ æµ‹è¯• 0001           â”‚ â”‚ æµ‹è¯• 0002           â”‚             â”‚
â”‚ â”‚ [ç«ç„°å›¾ SVG]        â”‚ â”‚ [ç«ç„°å›¾ SVG]        â”‚             â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**åŠŸèƒ½ç‰¹æ€§**ï¼š
- å®Œæ•´çš„ case è¯¦æƒ…ï¼ŒåŒ…æ‹¬æ‰€æœ‰ suites
- è¯¥ case çš„å…¨é¢å›¾è¡¨
- åŒ…å«æ‰€æœ‰æŒ‡æ ‡çš„å®Œæ•´æµ‹è¯•ç»“æœè¡¨æ ¼
- ç«ç„°å›¾åŒºå—ï¼ˆå¦‚æœå¯ç”¨ï¼‰
- å¯¼å‡º case çº§åˆ«çš„ CSV
- è¡¨æ ¼ä¸­çš„ Suite åˆ—ï¼ˆsuites ä¸å•ç‹¬å±•å¼€ï¼‰

### 2.5 å¯¹æ¯”åŠŸèƒ½è®¾è®¡

#### 2.5.1 è®¾è®¡ç†å¿µ

**æ ¸å¿ƒåŸåˆ™**ï¼š
- âœ… **æœ‰æ„ä¹‰çš„å¯¹æ¯”**ï¼šåªå…è®¸å¯¹æ¯”"ç›¸åŒ"çš„æµ‹è¯•ï¼ˆåŒä¸€ä¸ª config_file + case_nameï¼‰
- âœ… **å†å²è¿½è¸ª**ï¼šè¿½è¸ªæ€§èƒ½å›å½’å’Œä¼˜åŒ–æ•ˆæœ
- âœ… **è‡ªåŠ¨åŒ–è€Œéæ‰‹åŠ¨**ï¼šç³»ç»Ÿè‡ªåŠ¨è¯†åˆ«å¯å¯¹æ¯”çš„ç‰ˆæœ¬ï¼Œé¿å…ç”¨æˆ·é”™è¯¯å¯¹æ¯”
- âŒ **ç¦æ­¢è·¨ case å¯¹æ¯”**ï¼š`bool_equal` vs `array_contains` æ²¡æœ‰æ„ä¹‰

**ä¸æ”¯æŒçš„å¯¹æ¯”**ï¼š
- è·¨ä¸åŒ `config_file` çš„å¯¹æ¯”ï¼ˆä¸åŒ YAML æ–‡ä»¶ï¼‰
- è·¨ä¸åŒ `case_name` çš„å¯¹æ¯”ï¼ˆä¸åŒæµ‹è¯•ç”¨ä¾‹ï¼‰
- ä»»æ„æ‰‹åŠ¨é€‰æ‹© bundles/cases è¿›è¡Œå¯¹æ¯”

#### 2.5.2 ä¸¤å±‚å¯¹æ¯”æ¨¡å¼

##### æ¨¡å¼ 1ï¼šBundle çº§åˆ«å†å²å¯¹æ¯”ï¼ˆç²—ç²’åº¦ï¼‰

**ç”¨ä¾‹**ï¼š
- "æˆ‘ä¿®æ”¹äº†ä»£ç ï¼Œæƒ³çœ‹çœ‹å¯¹æ•´ä¸ª `bool/equal.yaml` æµ‹è¯•é›†çš„å½±å“"
- "å¯¹æ¯”æœ¬å‘¨å’Œä¸Šå‘¨çš„å®Œæ•´æµ‹è¯•ç»“æœ"
- "è¿™æ¬¡ä¼˜åŒ–å¯¹æ‰€æœ‰ cases éƒ½æœ‰æ•ˆæœå—ï¼Ÿ"

**åŠŸèƒ½ç‰¹æ€§**ï¼š
- å¯¹æ¯”åŒä¸€ä¸ª `config_file` çš„ä¸åŒæ‰§è¡Œï¼ˆä¸åŒ bundle_idï¼‰
- æ˜¾ç¤ºæ‰€æœ‰ cases çš„æ€§èƒ½å˜åŒ–æ¦‚è§ˆ
- ç”¨é¢œè‰²çƒ­åŠ›å›¾å±•ç¤ºå˜åŒ–è¶‹åŠ¿

**UI ç¤ºä¾‹**ï¼š
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Bundle å†å²å¯¹æ¯”: bool/equal.yaml                    [å…³é—­] â”‚
â”‚                                                               â”‚
â”‚ é€‰æ‹©å¯¹æ¯”ç‰ˆæœ¬ï¼ˆæœ€è¿‘ 10 æ¬¡æ‰§è¡Œï¼‰ï¼š                             â”‚
â”‚ â˜‘ 2025-01-12 10:00 (æœ€æ–°) â† åŸºå‡†                            â”‚
â”‚ â–¡ 2025-01-10 15:30                                           â”‚
â”‚ â–¡ 2025-01-08 09:00                                           â”‚
â”‚ â˜‘ 2025-01-05 14:20 â† å¯¹æ¯”                                    â”‚
â”‚                                                               â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ æ€§èƒ½å¯¹æ¯”æ¦‚è§ˆ                                             â”‚ â”‚
â”‚ â”‚                                                          â”‚ â”‚
â”‚ â”‚ Case: bool_equal                        [æŸ¥çœ‹è¯¦ç»†å¯¹æ¯”] â”‚ â”‚
â”‚ â”‚   QPS (avg):     45.2K  vs  42.1K   â†‘ +7.4%  ğŸŸ¢        â”‚ â”‚
â”‚ â”‚   P99 Latency:   0.82ms vs  0.95ms  â†“ -13.7% ğŸŸ¢        â”‚ â”‚
â”‚ â”‚                                                          â”‚ â”‚
â”‚ â”‚ Case: bool_not_equal                    [æŸ¥çœ‹è¯¦ç»†å¯¹æ¯”] â”‚ â”‚
â”‚ â”‚   QPS (avg):     38.5K  vs  39.2K   â†“ -1.8%  ğŸŸ¡        â”‚ â”‚
â”‚ â”‚   P99 Latency:   1.02ms vs  0.88ms  â†‘ +15.9% ğŸ”´        â”‚ â”‚
â”‚ â”‚                                                          â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                               â”‚
â”‚ [å¯¼å‡ºå¯¹æ¯”æŠ¥å‘Š]                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å…¥å£ç‚¹**ï¼š
- ä» Bundle Detail é¡µé¢ï¼š`[æŸ¥çœ‹å†å²è¶‹åŠ¿]` æŒ‰é’®
- ä» Bundles åˆ—è¡¨é¡µï¼šæ¯ä¸ª bundle å¡ç‰‡çš„ `[å¯¹æ¯”]` å›¾æ ‡

##### æ¨¡å¼ 2ï¼šCase çº§åˆ«å†å²å¯¹æ¯”ï¼ˆç»†ç²’åº¦ï¼‰

**ç”¨ä¾‹**ï¼š
- "è¿™ä¸ª case çš„æ€§èƒ½ä¸ºä»€ä¹ˆä¸‹é™äº†ï¼Ÿ"
- "å“ªäº›æ•°æ®é…ç½®/ç´¢å¼•ç»„åˆå˜å¿«äº†ï¼Œå“ªäº›å˜æ…¢äº†ï¼Ÿ"
- "å¯¹æ¯”ç«ç„°å›¾ï¼Œæ‰¾å‡ºæ€§èƒ½ç“¶é¢ˆçš„å˜åŒ–"

**åŠŸèƒ½ç‰¹æ€§**ï¼š
- å¯¹æ¯”åŒä¸€ä¸ª `config_file` + `case_name` çš„ä¸åŒæ‰§è¡Œ
- è¯¦ç»†çš„æ¯ä¸ªæµ‹è¯•ï¼ˆdata Ã— index Ã— expressionï¼‰çš„æ€§èƒ½å˜åŒ–
- ç”¨é¢œè‰²æ ‡æ³¨å˜åŒ–å¹…åº¦
- æ”¯æŒç«ç„°å›¾å¹¶æ’å¯¹æ¯”

**UI ç¤ºä¾‹**ï¼š
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Case å†å²å¯¹æ¯”: bool/equal.yaml â†’ bool_equal        [å…³é—­] â”‚
â”‚                                                               â”‚
â”‚ å¯¹æ¯”ç‰ˆæœ¬ï¼š                                                   â”‚
â”‚ åŸºå‡†: 2025-01-12 10:00 (æœ€æ–°)                               â”‚
â”‚ å¯¹æ¯”: 2025-01-05 14:20                                       â”‚
â”‚                                                               â”‚
â”‚ ğŸ“Š æ€§èƒ½è¶‹åŠ¿å›¾ (æœ€è¿‘ 10 æ¬¡)                                   â”‚
â”‚ QPS                                                           â”‚
â”‚ 50K â”¤                                    â—                   â”‚
â”‚ 45K â”¤                          â—    â—                        â”‚
â”‚ 40K â”¤              â—      â—                                  â”‚
â”‚ 35K â”¤     â—   â—                                              â”‚
â”‚ 30K â”¤ â—                                                      â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’                â”‚
â”‚       1/1  1/3  1/5  1/7  1/9  1/11 1/12                     â”‚
â”‚                                                               â”‚
â”‚ ğŸ“‹ è¯¦ç»†å¯¹æ¯”                                                   â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚Suite â”‚Data    â”‚Index  â”‚Expr       â”‚QPS   â”‚å˜åŒ–  â”‚P99  â”‚å˜åŒ–â”‚ â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”¤ â”‚
â”‚ â”‚def.. â”‚bal..   â”‚no_idx â”‚good==true â”‚25.3K â”‚â†‘+12%ğŸŸ¢â”‚0.8msâ”‚â†“-8%ğŸŸ¢â”‚ â”‚
â”‚ â”‚def.. â”‚bal..   â”‚bitmap â”‚good==true â”‚45.1K â”‚â†‘+5% ğŸŸ¢â”‚0.4msâ”‚â†’0% âšªâ”‚ â”‚
â”‚ â”‚def.. â”‚skewed  â”‚no_idx â”‚good==true â”‚28.7K â”‚â†“-3% ğŸ”´â”‚0.9msâ”‚â†‘+15%ğŸ”´â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                               â”‚
â”‚ ğŸ”¥ ç«ç„°å›¾å¯¹æ¯”                                                 â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚ â”‚ 2025-01-12 (åŸºå‡†)   â”‚  â”‚ 2025-01-05 (å¯¹æ¯”)   â”‚          â”‚
â”‚ â”‚ balanced Ã— bitmap    â”‚  â”‚ balanced Ã— bitmap    â”‚          â”‚
â”‚ â”‚ [ç«ç„°å›¾ SVG]         â”‚  â”‚ [ç«ç„°å›¾ SVG]         â”‚          â”‚
â”‚ â”‚                      â”‚  â”‚                      â”‚          â”‚
â”‚ â”‚ filter_expr: 45%    â”‚  â”‚ filter_expr: 52%    â”‚          â”‚
â”‚ â”‚ index_scan: 30%     â”‚  â”‚ index_scan: 28%     â”‚          â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚ ğŸ”´ filter_expr è€—æ—¶å¢åŠ äº† 7%                                 â”‚
â”‚ ğŸŸ¢ index_scan è€—æ—¶å‡å°‘äº† 2%                                  â”‚
â”‚                                                               â”‚
â”‚ [å¯¼å‡ºå¯¹æ¯”æŠ¥å‘Š] [ä¸‹è½½ç«ç„°å›¾å¯¹æ¯”]                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å…¥å£ç‚¹**ï¼š
- ä» Case Detail é¡µé¢ï¼š`[å¯¹æ¯”å†å²ç‰ˆæœ¬]` æŒ‰é’®
- ä» Bundle å¯¹æ¯”é¡µé¢ï¼šç‚¹å‡»æŸä¸ª case çš„ `[æŸ¥çœ‹è¯¦ç»†å¯¹æ¯”]`

#### 2.5.3 é¢œè‰²ç¼–ç æ–¹æ¡ˆ

**æ€§èƒ½æŒ‡æ ‡ï¼ˆè¶Šé«˜è¶Šå¥½ï¼šQPSã€ååé‡ï¼‰**ï¼š
- ğŸŸ¢ ç»¿è‰²ï¼šæå‡ > 5%ï¼ˆå¥½ï¼‰
- ğŸŸ¡ é»„è‰²ï¼šå˜åŒ– 1-5%ï¼ˆè½»å¾®ï¼‰
- âšª ç°è‰²ï¼šå˜åŒ– < 1%ï¼ˆåŸºæœ¬æŒå¹³ï¼‰
- ğŸŸ  æ©™è‰²ï¼šä¸‹é™ 1-5%ï¼ˆè½»å¾®ä¸‹é™ï¼‰
- ğŸ”´ çº¢è‰²ï¼šä¸‹é™ > 5%ï¼ˆæ˜¾è‘—ä¸‹é™ï¼‰

**æ€§èƒ½æŒ‡æ ‡ï¼ˆè¶Šä½è¶Šå¥½ï¼šå»¶è¿Ÿã€å†…å­˜ï¼‰**ï¼š
- ğŸŸ¢ ç»¿è‰²ï¼šä¸‹é™ > 5%ï¼ˆå˜å¿«äº†ï¼Œå¥½ï¼‰
- ğŸŸ¡ é»„è‰²ï¼šå˜åŒ– 1-5%ï¼ˆè½»å¾®ï¼‰
- âšª ç°è‰²ï¼šå˜åŒ– < 1%ï¼ˆåŸºæœ¬æŒå¹³ï¼‰
- ğŸŸ  æ©™è‰²ï¼šä¸Šå‡ 1-5%ï¼ˆè½»å¾®å˜æ…¢ï¼‰
- ğŸ”´ çº¢è‰²ï¼šä¸Šå‡ > 5%ï¼ˆæ˜¾è‘—å˜æ…¢ï¼‰

**é¢œè‰²æ˜¾ç¤ºæ–¹å¼**ï¼š
```typescript
// è®¡ç®—å˜åŒ–ç™¾åˆ†æ¯”å’Œé¢œè‰²
function getChangeInfo(current: number, previous: number, lowerIsBetter: boolean) {
  const change = ((current - previous) / previous) * 100;
  const absChange = Math.abs(change);

  let color: string;
  if (absChange < 1) {
    color = 'gray';  // âšª
  } else if (absChange < 5) {
    color = (lowerIsBetter ? change < 0 : change > 0) ? 'yellow' : 'orange';  // ğŸŸ¡/ğŸŸ 
  } else {
    color = (lowerIsBetter ? change < 0 : change > 0) ? 'green' : 'red';  // ğŸŸ¢/ğŸ”´
  }

  return { change, color };
}
```

#### 2.5.4 æ™ºèƒ½ç‰ˆæœ¬é€‰æ‹©

**è‡ªåŠ¨è¿‡æ»¤å¯å¯¹æ¯”ç‰ˆæœ¬**ï¼š
```typescript
// è·å–å¯å¯¹æ¯”çš„å†å²ç‰ˆæœ¬
function getComparableVersions(currentBundle: BundleInfo): BundleInfo[] {
  return allBundles
    .filter(b => b.config_file === currentBundle.config_file)  // åŒä¸€ä¸ª YAML æ–‡ä»¶
    .filter(b => b.bundle_id !== currentBundle.bundle_id)      // æ’é™¤å½“å‰ç‰ˆæœ¬
    .sort((a, b) => b.timestamp_ms - a.timestamp_ms)           // æŒ‰æ—¶é—´å€’åº
    .slice(0, 10);                                              // æœ€å¤šæ˜¾ç¤ºæœ€è¿‘ 10 æ¬¡
}

// åˆ¤æ–­ä¸¤ä¸ª case æ˜¯å¦å¯å¯¹æ¯”
function isSameCase(case1: CaseInfo, case2: CaseInfo): boolean {
  return (
    case1.config_file === case2.config_file &&
    case1.case_name === case2.case_name
  );
}
```

**æ¨èå¯¹æ¯”ç‰ˆæœ¬**ï¼š
- é»˜è®¤é€‰ä¸­æœ€æ–°ç‰ˆæœ¬ä½œä¸ºåŸºå‡†
- æ¨èå¯¹æ¯”"ä¸Šä¸€æ¬¡æ‰§è¡Œ"ï¼ˆæœ€å¸¸è§çš„ç”¨ä¾‹ï¼‰
- æ ‡è®°"æœ€åä¸€æ¬¡æ­£å¸¸"ç‰ˆæœ¬ï¼ˆå¦‚æœæ£€æµ‹åˆ°å›å½’ï¼‰

#### 2.5.5 æ€§èƒ½å›å½’æ£€æµ‹

**è‡ªåŠ¨æ£€æµ‹**ï¼š
åœ¨ Case Detail é¡µé¢è‡ªåŠ¨æ˜¾ç¤ºå›å½’è­¦å‘Šï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âš ï¸ æ€§èƒ½å›å½’æ£€æµ‹                                              â”‚
â”‚                                                               â”‚
â”‚ æ£€æµ‹åˆ° 2 ä¸ªæ˜¾è‘—çš„æ€§èƒ½ä¸‹é™ï¼š                                   â”‚
â”‚                                                               â”‚
â”‚ 1. balanced Ã— bitmap_index Ã— good==true                      â”‚
â”‚    QPS: 45.1K â†’ 38.2K (â†“ -15.3%) ğŸ”´                          â”‚
â”‚    æœ€åæ­£å¸¸: 2025-01-10 15:30                                â”‚
â”‚    å¼€å§‹å¼‚å¸¸: 2025-01-11 09:00                                â”‚
â”‚    [æŸ¥çœ‹å¯¹æ¯”] [æŸ¥çœ‹ç«ç„°å›¾]                                    â”‚
â”‚                                                               â”‚
â”‚ 2. skewed Ã— no_index Ã— good!=true                            â”‚
â”‚    P99 Latency: 0.9ms â†’ 1.2ms (â†‘ +33.3%) ğŸ”´                 â”‚
â”‚    æœ€åæ­£å¸¸: 2025-01-09 14:00                                â”‚
â”‚    å¼€å§‹å¼‚å¸¸: 2025-01-10 08:30                                â”‚
â”‚    [æŸ¥çœ‹å¯¹æ¯”] [æŸ¥çœ‹ç«ç„°å›¾]                                    â”‚
â”‚                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**æ£€æµ‹ç®—æ³•**ï¼š
```typescript
// ç®€å•çš„å›å½’æ£€æµ‹
function detectRegressions(currentCase: CaseMetrics, history: CaseMetrics[]): Regression[] {
  const regressions: Regression[] = [];

  // éå†å½“å‰ case çš„æ‰€æœ‰æµ‹è¯•
  for (const currentTest of currentCase.tests) {
    // æ‰¾åˆ°å†å²ä¸­ç›¸åŒçš„æµ‹è¯•
    const historicalTests = history
      .flatMap(h => h.tests)
      .filter(t =>
        t.data_config === currentTest.data_config &&
        t.index_config === currentTest.index_config &&
        t.expression === currentTest.expression
      )
      .sort((a, b) => b.timestamp_ms - a.timestamp_ms);

    if (historicalTests.length === 0) continue;

    // ä¸æœ€è¿‘çš„å†å²å¯¹æ¯”
    const recentTest = historicalTests[0];
    const qpsChange = ((currentTest.qps - recentTest.qps) / recentTest.qps) * 100;

    // QPS ä¸‹é™è¶…è¿‡ 10% è§†ä¸ºå›å½’
    if (qpsChange < -10) {
      regressions.push({
        test: currentTest,
        metric: 'QPS',
        change: qpsChange,
        lastNormal: findLastNormalVersion(currentTest, historicalTests),
        firstAbnormal: currentTest.bundle_id,
      });
    }
  }

  return regressions;
}
```

#### 2.5.6 è·¯ç”±è®¾è®¡

**URL ç»“æ„**ï¼š
```
# Bundle å†å²å¯¹æ¯”
/bundle/compare?config=bool/equal.yaml&bundles=1704067200000,1704063600000

# Case å†å²å¯¹æ¯”
/case/compare?config=bool/equal.yaml&case=bool_equal&bundles=1704067200000,1704063600000

# å¸¦ç«ç„°å›¾é«˜äº®çš„å¯¹æ¯”
/case/compare?config=bool/equal.yaml&case=bool_equal&bundles=1704067200000,1704063600000&test=0001
```

**è·¯ç”±é…ç½®**ï¼š
```tsx
<Routes>
  <Route path="/" element={<Navigate to="/bundles" />} />
  <Route path="/bundles" element={<BundlesPage />} />
  <Route path="/bundle/:bundleId" element={<BundleDetailPage />} />
  <Route path="/bundle/:bundleId/case/:caseId" element={<CaseDetailPage />} />

  {/* å¯¹æ¯”é¡µé¢ */}
  <Route path="/bundle/compare" element={<BundleComparePage />} />
  <Route path="/case/compare" element={<CaseComparePage />} />
</Routes>
```

#### 2.5.7 è¶‹åŠ¿å›¾å¯è§†åŒ–

åœ¨ Case å¯¹æ¯”é¡µé¢æ˜¾ç¤ºå†å²è¶‹åŠ¿ï¼š

```typescript
// è¶‹åŠ¿å›¾ç»„ä»¶
function TrendChart({ metric, history }: TrendChartProps) {
  return (
    <div className="trend-chart">
      <h4>{metric} å†å²è¶‹åŠ¿</h4>
      <LineChart data={history} xKey="timestamp" yKey={metric}>
        {/* æ ‡è®°å½“å‰ç‰ˆæœ¬ */}
        <ReferenceLine x={currentTimestamp} stroke="blue" label="å½“å‰" />
        {/* æ ‡è®°å¯¹æ¯”ç‰ˆæœ¬ */}
        <ReferenceLine x={compareTimestamp} stroke="green" label="å¯¹æ¯”" />
        {/* æ ‡è®°å›å½’åŒºåŸŸ */}
        {regressions.map(r => (
          <ReferenceArea
            x1={r.startTimestamp}
            x2={r.endTimestamp}
            fill="red"
            fillOpacity={0.1}
          />
        ))}
      </LineChart>
    </div>
  );
}
```

#### 2.5.8 å¯¼å‡ºå’Œåˆ†äº«

**å¯¼å‡ºåŠŸèƒ½**ï¼š
- CSV æ ¼å¼ï¼šå¯¹æ¯”æ•°æ®è¡¨æ ¼
- JSON æ ¼å¼ï¼šå®Œæ•´å¯¹æ¯”æ•°æ®
- PNG æ ¼å¼ï¼šè¶‹åŠ¿å›¾å’Œå¯¹æ¯”å›¾è¡¨
- HTML æŠ¥å‘Šï¼šå®Œæ•´çš„å¯¹æ¯”æŠ¥å‘Šï¼ŒåŒ…å«å›¾è¡¨å’Œè¡¨æ ¼

**åˆ†äº«é“¾æ¥**ï¼š
```
# ç”Ÿæˆå¯åˆ†äº«çš„å¯¹æ¯”é“¾æ¥
https://benchmark-ui.example.com/case/compare?config=bool/equal.yaml&case=bool_equal&bundles=1704067200000,1704063600000

# ç”¨æˆ·ç‚¹å‡»é“¾æ¥åç›´æ¥çœ‹åˆ°å¯¹æ¯”ç»“æœ
```

#### 2.5.9 å®ç°ä¼˜å…ˆçº§

**Phase 1ï¼ˆæ ¸å¿ƒåŠŸèƒ½ï¼‰**ï¼š
1. Case çº§åˆ«å†å²å¯¹æ¯”ï¼ˆæœ€é‡è¦ï¼‰
2. åŸºæœ¬çš„é¢œè‰²ç¼–ç 
3. ç‰ˆæœ¬é€‰æ‹© UI
4. è¯¦ç»†å¯¹æ¯”è¡¨æ ¼

**Phase 2ï¼ˆå¢å¼ºåŠŸèƒ½ï¼‰**ï¼š
1. Bundle çº§åˆ«å¯¹æ¯”
2. è¶‹åŠ¿å›¾å¯è§†åŒ–
3. æ€§èƒ½å›å½’æ£€æµ‹
4. å¯¼å‡ºåŠŸèƒ½

**Phase 3ï¼ˆé«˜çº§åŠŸèƒ½ï¼‰**ï¼š
1. ç«ç„°å›¾å¹¶æ’å¯¹æ¯”
2. æ™ºèƒ½æ¨èå¯¹æ¯”ç‰ˆæœ¬
3. è‡ªå®šä¹‰å›å½’é˜ˆå€¼
4. å¯¹æ¯”æŠ¥å‘Šæ¨¡æ¿

---

## 3. å®æ–½è®¡åˆ’

### 3.1 é˜¶æ®µ 1ï¼šåç«¯ - æ–‡ä»¶ç»“æ„ (ç¬¬ 1-2 å‘¨)

#### 3.1.1 æ›´æ–°åŸºå‡†æµ‹è¯•é…ç½®å’Œæ‰§è¡Œ

**è¦ä¿®æ”¹çš„æ–‡ä»¶**ï¼š
- `scalar_filter_benchmark.h`
- `scalar_filter_benchmark.cpp`
- `main.cpp`

**å˜æ›´å†…å®¹**ï¼š

1. **åœ¨ BenchmarkResult ä¸­æ·»åŠ  Bundle æ¦‚å¿µ**ï¼š
```cpp
struct BenchmarkResult {
    // Bundle æ ‡è¯†
    int64_t bundle_id;           // Bundle æ—¶é—´æˆ³
    std::string config_file;     // YAML é…ç½®æ–‡ä»¶è·¯å¾„

    // Case æ ‡è¯†
    std::string case_name;       // æ¥è‡ª YAML cases[].name
    int64_t case_id;             // Bundle å†…çš„å”¯ä¸€ case ID

    // Suite æ ‡è¯†ï¼ˆä¿ç•™ç°æœ‰ï¼‰
    std::string suite_name;

    // å…¶ä½™ç°æœ‰å­—æ®µ...
};
```

2. **æ›´æ–°è¾“å‡ºç›®å½•ç»“æ„**ï¼š
```cpp
// åœ¨ ScalarFilterBenchmark::RunBenchmark() ä¸­
std::string bundle_dir = CreateBundleDirectory(bundle_id, config_file);
for (æ¯ä¸ª case) {
    std::string case_dir = CreateCaseDirectory(bundle_dir, case_id, case_name);
    // å°† case ç»“æœå†™å…¥ case_dir
}
```

3. **ç”Ÿæˆæ–°çš„ JSON æ–‡ä»¶**ï¼š
   - `bundle_meta.json`: Bundle çº§åˆ«å…ƒæ•°æ®
   - `cases/<case_id>/case_meta.json`: Case çº§åˆ«å…ƒæ•°æ®
   - `cases/<case_id>/case_metrics.json`: åˆå¹¶çš„ suite æŒ‡æ ‡

#### 3.1.2 åˆ›å»ºæ–‡ä»¶å†™å…¥å™¨

**æ–°æ–‡ä»¶**ï¼š
- `result_writers.h`
- `result_writers.cpp`

**å‡½æ•°**ï¼š
```cpp
void WriteBundleMeta(const std::string& bundle_dir,
                     const BundleMetadata& meta);

void WriteCaseMeta(const std::string& case_dir,
                   const CaseMetadata& meta);

void WriteCaseMetrics(const std::string& case_dir,
                      const std::vector<BenchmarkResult>& results);

void WriteIndexJson(const std::string& results_base_dir,
                    const std::vector<BundleInfo>& bundles);
```

#### 3.1.3 æ›´æ–° index.json ç»“æ„

**æ–°æ ¼å¼**ï¼š
```json
{
  "bundles": [
    {
      "bundle_id": "1704067200000",
      "config_file": "bool/equal.yaml",
      "timestamp_ms": 1704067200000,
      "label": "å¸ƒå°”ç›¸ç­‰æ€§æµ‹è¯•",
      "cases": ["bool_equal", "bool_not_equal"],
      "total_tests": 15
    }
  ]
}
```

### 3.2 é˜¶æ®µ 2ï¼šAPI å±‚ (ç¬¬ 2-3 å‘¨)

#### 3.2.1 æ›´æ–° API å‡½æ•°

**æ–‡ä»¶**: `ui/src/react/utils/api.ts`

**æ–°å‡½æ•°**ï¼š
```typescript
// Bundle APIs
export async function getBundles(): Promise<BundleInfo[]>
export async function getBundleMeta(bundleId: string): Promise<BundleMeta>
export async function getBundleSummary(bundleId: string): Promise<string>

// Case APIs
export async function getCaseMeta(bundleId: string, caseId: string): Promise<CaseMeta>
export async function getCaseMetrics(bundleId: string, caseId: string): Promise<CaseMetrics>
export async function getCaseSummary(bundleId: string, caseId: string): Promise<string>

// è¾…åŠ©å‡½æ•°
export function buildCaseAssetUrl(bundleId: string, caseId: string, path: string): string
```

#### 3.2.2 å®šä¹‰ TypeScript ç±»å‹

**æ–‡ä»¶**: `ui/src/react/types/bundle.ts` (æ–°æ–‡ä»¶)

```typescript
export interface BundleInfo {
  bundle_id: string;
  config_file: string;
  timestamp_ms: number;
  label?: string;
  cases: string[];
  total_tests: number;
}

export interface BundleMeta {
  bundle_id: string;
  config_file: string;
  config_content: string;
  timestamp_ms: number;
  test_params: TestParams;
  cases: CaseInfo[];
}

export interface CaseInfo {
  case_name: string;
  case_id: string;
  suites: string[];
  total_tests: number;
  has_flamegraphs: boolean;
}

export interface CaseMeta {
  case_id: string;
  case_name: string;
  bundle_id: string;
  suites: SuiteInfo[];
  total_tests: number;
  has_flamegraphs: boolean;
}

export interface SuiteInfo {
  suite_name: string;
  data_configs: string[];
  index_configs: string[];
  expr_templates: string[];
}

export interface CaseMetrics {
  tests: TestResult[];
}

export interface TestResult {
  test_id: string;
  suite_name: string;
  data_config: string;
  index_config: string;
  expression: string;
  qps: number;
  latency_ms: LatencyMetrics;
  selectivity: number;
  flamegraph?: string;
}
```

### 3.3 é˜¶æ®µ 3ï¼šUI ç»„ä»¶ (ç¬¬ 3-4 å‘¨)

#### 3.3.1 åˆ›å»ºæ–°é¡µé¢

**æ–°æ–‡ä»¶**ï¼š
1. `ui/src/react/pages/BundlesPage.tsx`
   - æ›¿ä»£å½“å‰ RunsPage ä½œä¸ºä¸»å…¥å£
   - åˆ—å‡ºæ‰€æœ‰ bundlesï¼Œå¸¦å¯å±•å¼€çš„ case æ‘˜è¦

2. `ui/src/react/pages/BundleDetailPage.tsx`
   - æ˜¾ç¤º bundle å†…æ‰€æœ‰ cases çš„æ¦‚è§ˆ
   - æ¯ä¸ª case çš„å›¾è¡¨å’Œè¡¨æ ¼ï¼ˆå¯æŠ˜å ï¼‰
   - æ— ç«ç„°å›¾

3. `ui/src/react/pages/CaseDetailPage.tsx`
   - å•ä¸ª case çš„è¯¦ç»†è§†å›¾
   - æ‰€æœ‰æŒ‡æ ‡å’Œå›¾è¡¨
   - ç«ç„°å›¾åŒºå—

**æ›´æ–°æ–‡ä»¶**ï¼š
4. `ui/src/react/App.tsx`
   - æ›´æ–°è·¯ç”±åˆ°æ–°é¡µé¢ç»“æ„

#### 3.3.2 åˆ›å»ºå¯å¤ç”¨ç»„ä»¶

**æ–°æ–‡ä»¶**ï¼š
1. `ui/src/react/components/BundleCard.tsx`
   - BundlesPage çš„å¯å±•å¼€ bundle å¡ç‰‡

2. `ui/src/react/components/CaseSummary.tsx`
   - bundle è§†å›¾ä¸­ case çš„æ‘˜è¦å¡ç‰‡

3. `ui/src/react/components/CaseCharts.tsx`
   - å•ä¸ª case ç‰¹å®šçš„å›¾è¡¨
   - åœ¨ Bundle Detail å’Œ Case Detail ä¸­å¤ç”¨

4. `ui/src/react/components/CaseMetricsTable.tsx`
   - æ˜¾ç¤º case æ‰€æœ‰æµ‹è¯•ç»“æœçš„è¡¨æ ¼
   - åŒ…å« suite åˆ—

#### 3.3.3 æ›´æ–°ç°æœ‰ç»„ä»¶

**è¦ä¿®æ”¹çš„æ–‡ä»¶**ï¼š
1. `ui/src/react/components/DatasetCharts.tsx`
   - é€‚é… case çº§åˆ«æ•°æ®

2. `ui/src/react/components/Flamegraphs.tsx`
   - æ›´æ–°ä»¥ä½¿ç”¨ case çº§åˆ«çš„ç«ç„°å›¾è·¯å¾„

### 3.4 é˜¶æ®µ 4ï¼šè·¯ç”±å’Œå¯¼èˆª (ç¬¬ 4 å‘¨)

#### 3.4.1 æ›´æ–°è·¯ç”±

**æ–‡ä»¶**: `ui/src/react/App.tsx`

```tsx
<Routes>
  <Route path="/" element={<Navigate to="/bundles" />} />
  <Route path="/bundles" element={<BundlesPage />} />
  <Route path="/bundle/:bundleId" element={<BundleDetailPage />} />
  <Route path="/bundle/:bundleId/case/:caseId" element={<CaseDetailPage />} />
  <Route path="/compare" element={<ComparePage />} />
</Routes>
```

#### 3.4.2 é¢åŒ…å±‘å¯¼èˆª

æ·»åŠ æ˜¾ç¤ºå±‚æ¬¡ç»“æ„çš„é¢åŒ…å±‘ç»„ä»¶ï¼š
```
é¦–é¡µ > Bundles > bool/equal.yaml > bool_equal
```

### 3.5 é˜¶æ®µ 5ï¼šåŠŸèƒ½éªŒè¯å’Œæ–‡æ¡£ (ç¬¬ 5 å‘¨)

#### 3.5.1 åŠŸèƒ½éªŒè¯

- ä½¿ç”¨æ–°ç»“æ„è¿›è¡Œç«¯åˆ°ç«¯åŸºå‡†æµ‹è¯•è¿è¡Œ
- éªŒè¯æ‰€æœ‰æ–‡ä»¶æ­£ç¡®ç”Ÿæˆ
- éªŒè¯ UI å¯¼èˆªæµç¨‹æ­£å¸¸å·¥ä½œ

#### 3.5.2 æ–‡æ¡£

1. æ›´æ–° `README.md` æ·»åŠ æ–°ç»“æ„è¯´æ˜
2. æ›´æ–° `data_generation_schema.md` æ·»åŠ  bundle/case æ¦‚å¿µ
3. åˆ›å»º UI å¯¼èˆªç”¨æˆ·æŒ‡å—
4. ä¸ºæ–°ç«¯ç‚¹æ·»åŠ  API æ–‡æ¡£

---

## 4. è¯¦ç»†ä»»åŠ¡åˆ†è§£

### 4.1 åç«¯ä»»åŠ¡

- [x] **ä»»åŠ¡ B1**: åœ¨ BenchmarkResult ç»“æ„ä½“ä¸­æ·»åŠ  bundle_idã€case_nameã€case_id å­—æ®µ
- [x] **ä»»åŠ¡ B2**: æ›´æ–°ç›®å½•åˆ›å»ºä»¥ä½¿ç”¨ bundle/case å±‚æ¬¡ç»“æ„
- [x] **ä»»åŠ¡ B3**: å®ç° WriteBundleMeta() å‡½æ•°
- [x] **ä»»åŠ¡ B4**: å®ç° WriteCaseMeta() å‡½æ•°
- [x] **ä»»åŠ¡ B5**: å®ç° WriteCaseMetrics() å‡½æ•°
- [x] **ä»»åŠ¡ B6**: æ›´æ–° WriteIndexJson() ä»¥ç”Ÿæˆ bundles æ•°ç»„
- [x] **ä»»åŠ¡ B7**: æ›´æ–° main.cpp ä»¥è·Ÿè¸ª bundle å’Œ case ä¿¡æ¯
- [x] **ä»»åŠ¡ B8**: æ›´æ–° RunBenchmark() ä¸­çš„ç»“æœå†™å…¥åˆ°æ–°ç»“æ„
- [x] **ä»»åŠ¡ B9**: ä¸ºæ¯ä¸ª case ç”Ÿæˆ case_summary.txt
- [x] **ä»»åŠ¡ B10**: ä¸ºæ•´ä¸ª bundle ç”Ÿæˆ bundle_summary.txt

### 4.2 API ä»»åŠ¡

- [ ] **ä»»åŠ¡ A1**: åˆ›å»º bundle TypeScript ç±»å‹
- [ ] **ä»»åŠ¡ A2**: å®ç° getBundles() API å‡½æ•°
- [ ] **ä»»åŠ¡ A3**: å®ç° getBundleMeta() API å‡½æ•°
- [ ] **ä»»åŠ¡ A4**: å®ç° getBundleSummary() API å‡½æ•°
- [ ] **ä»»åŠ¡ A5**: å®ç° getCaseMeta() API å‡½æ•°
- [ ] **ä»»åŠ¡ A6**: å®ç° getCaseMetrics() API å‡½æ•°
- [ ] **ä»»åŠ¡ A7**: å®ç° getCaseSummary() API å‡½æ•°
- [ ] **ä»»åŠ¡ A8**: å®ç° buildCaseAssetUrl() è¾…åŠ©å‡½æ•°

### 4.3 UI ç»„ä»¶ä»»åŠ¡

- [ ] **ä»»åŠ¡ U1**: åˆ›å»º BundlesPage.tsx
- [ ] **ä»»åŠ¡ U2**: åˆ›å»º BundleDetailPage.tsx
- [ ] **ä»»åŠ¡ U3**: åˆ›å»º CaseDetailPage.tsx
- [ ] **ä»»åŠ¡ U4**: åˆ›å»º BundleCard.tsx ç»„ä»¶
- [ ] **ä»»åŠ¡ U5**: åˆ›å»º CaseSummary.tsx ç»„ä»¶
- [ ] **ä»»åŠ¡ U6**: åˆ›å»º CaseCharts.tsx ç»„ä»¶
- [ ] **ä»»åŠ¡ U7**: åˆ›å»º CaseMetricsTable.tsx ç»„ä»¶
- [ ] **ä»»åŠ¡ U8**: æ›´æ–° DatasetCharts.tsx é€‚é… case çº§åˆ«æ•°æ®
- [ ] **ä»»åŠ¡ U9**: æ›´æ–° Flamegraphs.tsx é€‚é… case çº§åˆ«è·¯å¾„
- [ ] **ä»»åŠ¡ U10**: åˆ›å»º Breadcrumb.tsx å¯¼èˆªç»„ä»¶
- [ ] **ä»»åŠ¡ U11**: æ›´æ–° App.tsx æ·»åŠ æ–°è·¯ç”±
- [ ] **ä»»åŠ¡ U12**: åœ¨ BundleDetailPage ä¸­æ·»åŠ å¯æŠ˜å åŒºå—
- [ ] **ä»»åŠ¡ U13**: åœ¨ Bundle/Case Detail é¡µé¢æ·»åŠ å¯¹æ¯”å…¥å£

### 4.4 å¯¹æ¯”åŠŸèƒ½ä»»åŠ¡

- [ ] **ä»»åŠ¡ C1**: å®ç° getComparableVersions() API å‡½æ•°ï¼ˆè·å–å¯å¯¹æ¯”çš„å†å²ç‰ˆæœ¬ï¼‰
- [ ] **ä»»åŠ¡ C2**: å®ç° getCaseHistory() API å‡½æ•°ï¼ˆè·å– case çš„å†å²æŒ‡æ ‡ï¼‰
- [ ] **ä»»åŠ¡ C3**: åˆ›å»º BundleComparePage.tsxï¼ˆBundle çº§åˆ«å¯¹æ¯”é¡µé¢ï¼‰
- [ ] **ä»»åŠ¡ C4**: åˆ›å»º CaseComparePage.tsxï¼ˆCase çº§åˆ«å¯¹æ¯”é¡µé¢ï¼‰
- [ ] **ä»»åŠ¡ C5**: åˆ›å»º CompareTable.tsx ç»„ä»¶ï¼ˆå¯¹æ¯”è¡¨æ ¼ï¼Œå¸¦é¢œè‰²ç¼–ç ï¼‰
- [ ] **ä»»åŠ¡ C6**: åˆ›å»º TrendChart.tsx ç»„ä»¶ï¼ˆå†å²è¶‹åŠ¿å›¾ï¼‰
- [ ] **ä»»åŠ¡ C7**: åˆ›å»º RegressionDetector.tsx ç»„ä»¶ï¼ˆå›å½’æ£€æµ‹æ˜¾ç¤ºï¼‰
- [ ] **ä»»åŠ¡ C8**: å®ç°é¢œè‰²ç¼–ç é€»è¾‘ï¼ˆgetChangeInfo å‡½æ•°ï¼‰
- [ ] **ä»»åŠ¡ C9**: å®ç°æ€§èƒ½å›å½’æ£€æµ‹ç®—æ³•ï¼ˆdetectRegressions å‡½æ•°ï¼‰
- [ ] **ä»»åŠ¡ C10**: å®ç°ç«ç„°å›¾å¹¶æ’å¯¹æ¯”ç»„ä»¶
- [ ] **ä»»åŠ¡ C11**: æ·»åŠ å¯¹æ¯”ç»“æœå¯¼å‡ºåŠŸèƒ½ï¼ˆCSVã€JSONã€PNGï¼‰
- [ ] **ä»»åŠ¡ C12**: æ›´æ–°è·¯ç”±ä»¥æ”¯æŒå¯¹æ¯”é¡µé¢
- [ ] **ä»»åŠ¡ C13**: å®ç°ç‰ˆæœ¬é€‰æ‹© UIï¼ˆå¤é€‰æ¡†åˆ—è¡¨ï¼‰

### 4.5 æ–‡æ¡£ä»»åŠ¡

- [ ] **ä»»åŠ¡ D1**: æ›´æ–° README.md
- [ ] **ä»»åŠ¡ D2**: æ›´æ–° data_generation_schema.md
- [ ] **ä»»åŠ¡ D3**: åˆ›å»º UI å¯¼èˆªæŒ‡å—
- [ ] **ä»»åŠ¡ D4**: è®°å½•æ–°æ–‡ä»¶ç»“æ„
- [ ] **ä»»åŠ¡ D5**: è®°å½• API ç«¯ç‚¹

---

## 5. å…³é”®è®¾è®¡å†³ç­–

### 5.1 Bundle æ ‡è¯†

**å†³ç­–**ï¼šä½¿ç”¨ `bundle_id`ï¼ˆæ—¶é—´æˆ³ï¼‰+ `config_file` è·¯å¾„

**ç†ç”±**ï¼š
- æ—¶é—´æˆ³ç¡®ä¿å”¯ä¸€æ€§
- é…ç½®æ–‡ä»¶è·¯å¾„æä¾›è¯­ä¹‰å«ä¹‰
- å…è®¸åŒä¸€é…ç½®æ–‡ä»¶çš„å¤šæ¬¡è¿è¡Œ
- æ˜“äºæŒ‰æ—¶é—´é¡ºåºæ’åº

### 5.2 Case æ ‡è¯†

**å†³ç­–**ï¼šä½¿ç”¨ `case_id` = `bundle_id_<ç´¢å¼•>` æ ¼å¼

**ç†ç”±**ï¼š
- bundle å†…å¤–éƒ½å”¯ä¸€
- ç´¢å¼•ä¿ç•™ YAML é¡ºåº
- ç®€å•ç”Ÿæˆå’Œè§£æ

### 5.3 UI ä¸­ Suite çš„åˆå¹¶

**å†³ç­–**ï¼šåœ¨è¡¨æ ¼ä¸­æ˜¾ç¤º suite åˆ—ï¼Œä½†ä¸åˆ›å»ºå•ç‹¬çš„å¯å±•å¼€åŒºå—

**ç†ç”±**ï¼š
- é™ä½ UI å¤æ‚åº¦
- Suite æ˜¯æ‰§è¡Œç»†èŠ‚ï¼Œä¸æ˜¯é€»è¾‘åˆ†ç»„
- Case æ˜¯ç”¨æˆ·ä¸»è¦å…³æ³¨çš„å•å…ƒ
- ä»ç„¶å…è®¸æŒ‰ suite è¿‡æ»¤/æ’åº

### 5.4 ç«ç„°å›¾ä½ç½®

**å†³ç­–**ï¼š
- Bundle Detailï¼šæ— ç«ç„°å›¾
- Case Detailï¼šè¯¥ case çš„æ‰€æœ‰ç«ç„°å›¾

**ç†ç”±**ï¼š
- Bundle Detail ç”¨äºæ¦‚è§ˆå’Œå¯¹æ¯”
- ç«ç„°å›¾æ˜¯è¯¦ç»†çš„æ€§èƒ½åˆ†æäº§ç‰©
- Case Detail æ˜¯ç”¨æˆ·æ·±å…¥åˆ†æçš„åœ°æ–¹
- å‡å°‘ Bundle Detail çš„é¡µé¢åŠ è½½æ—¶é—´

### 5.5 ç›®å½•ç»“æ„

**å†³ç­–**ï¼šåœ¨ bundle ç›®å½•ä¸‹åµŒå¥— cases

**ç†ç”±**ï¼š
- æ¸…æ™°çš„å±‚æ¬¡ç»“æ„æ˜ å°„é€»è¾‘ç»“æ„
- æ˜“äºåˆ é™¤æ•´ä¸ª bundle
- ç®€åŒ–å¤‡ä»½å’Œå½’æ¡£
- é¿å…å‘½åç©ºé—´å†²çª

---

## 6. é£é™©è¯„ä¼°å’Œç¼“è§£

### 6.1 é£é™©

| é£é™© | å½±å“ | æ¦‚ç‡ | ç¼“è§£æªæ–½ |
|------|------|------|----------|
| æ€§èƒ½å›é€€ | ä¸­ | ä½ | ä¿æŒæ–‡ä»¶æ“ä½œé«˜æ•ˆï¼Œæ·»åŠ ç¼“å­˜ |
| UI å¤æ‚åº¦ | ä¸­ | ä¸­ | è¿­ä»£è®¾è®¡ï¼Œæ”¶é›†ç”¨æˆ·åé¦ˆ |
| å¤§å‹ bundle åŠ è½½æ—¶é—´ | ä¸­ | ä¸­ | å®ç°æ‡’åŠ è½½å’Œåˆ†é¡µ |

### 6.2 ç¼“è§£ç­–ç•¥

1. **æ€§èƒ½**ï¼š
   - æ‡’åŠ è½½ case è¯¦æƒ…
   - å¯¹å¤§å‹æµ‹è¯•è¡¨æ ¼åˆ†é¡µ
   - ç¼“å­˜ API å“åº”
   - å¯¹æ˜‚è´µç»„ä»¶ä½¿ç”¨ React.memo

2. **ç”¨æˆ·ä½“éªŒ**ï¼š
   - æ¸…æ™°çš„æ–‡æ¡£å’Œç¤ºä¾‹
   - åˆ†é˜¶æ®µæ¨å‡ºå¹¶æ”¶é›†åé¦ˆ

---

## 7. æˆåŠŸæ ‡å‡†

### 7.1 åŠŸèƒ½è¦æ±‚

- [ ] æ‰€æœ‰åŸºå‡†æµ‹è¯•ç”Ÿæˆæ–°çš„ bundle/case ç»“æ„
- [ ] UI æ˜¾ç¤º bundles åˆ—è¡¨ï¼Œå¸¦å¯å±•å¼€çš„ cases
- [ ] Bundle Detail é¡µé¢æ˜¾ç¤ºæ‰€æœ‰ cases çš„å›¾è¡¨å’Œè¡¨æ ¼
- [ ] Case Detail é¡µé¢æ˜¾ç¤ºå®Œæ•´çš„ case è¯¦æƒ…å’Œç«ç„°å›¾
- [ ] é¡µé¢é—´å¯¼èˆªæµç•…
- [ ] å¯¹æ¯”åŠŸèƒ½é€‚é…æ–°ç»“æ„

### 7.2 éåŠŸèƒ½è¦æ±‚

- [ ] å…¸å‹ bundleï¼ˆ10 ä¸ª casesï¼Œ100 ä¸ªæµ‹è¯•ï¼‰çš„é¡µé¢åŠ è½½æ—¶é—´ < 2 ç§’
- [ ] UI åœ¨ç§»åŠ¨è®¾å¤‡ä¸Šå“åº”è‰¯å¥½
- [ ] æ‰€æœ‰ç°æœ‰åŠŸèƒ½ç»§ç»­å·¥ä½œ
- [ ] æ–‡æ¡£å®Œæ•´å‡†ç¡®

### 7.3 ç”¨æˆ·éªŒæ”¶

- [ ] ç”¨æˆ·èƒ½è½»æ¾æ‰¾åˆ°ç‰¹å®š YAML é…ç½®çš„ç»“æœ
- [ ] ä»é…ç½® â†’ bundle â†’ case çš„å¯¼èˆªç›´è§‚
- [ ] å¯¹æ¯”å·¥ä½œæµæ¯”ä»¥å‰æ›´æ¸…æ™°
- [ ] ç«ç„°å›¾è®¿é—®æ›´æœ‰ç»„ç»‡
- [ ] æ•´ä½“åé¦ˆç§¯æ

---

## 8. æ—¶é—´çº¿

| å‘¨ | é˜¶æ®µ | äº¤ä»˜æˆæœ |
|----|------|----------|
| 1-2 | åç«¯ | æ–°æ–‡ä»¶ç»“æ„ã€å†™å…¥å™¨ã€ç›®å½•ç»„ç»‡ |
| 2-3 | API | TypeScript ç±»å‹ã€API å‡½æ•°ã€æ•°æ®è·å– |
| 3-4 | UI | æ–°é¡µé¢ã€ç»„ä»¶ã€å›¾è¡¨ |
| 4 | å¯¼èˆª | è·¯ç”±ã€é¢åŒ…å±‘ã€é“¾æ¥ |
| 5 | åŠŸèƒ½éªŒè¯å’Œæ–‡æ¡£ | ç«¯åˆ°ç«¯éªŒè¯ã€æ–‡æ¡£ã€ç”¨æˆ·æŒ‡å— |

**æ€»é¢„è®¡æ—¶é—´**ï¼š5 å‘¨

---

## 9. æœªæ¥å¢å¼º (v2.0 å)

### 9.1 å¯¹æ¯”å¢å¼º

- è·¨ä¸åŒ bundles å¯¹æ¯”ç‰¹å®š cases
- YAML é…ç½®çš„å¯è§†åŒ–å·®å¼‚
- å¹¶æ’ç«ç„°å›¾å¯¹æ¯”

### 9.2 å†å²åˆ†æ

- è·Ÿè¸ªåŒä¸€é…ç½®æ–‡ä»¶éšæ—¶é—´çš„å˜åŒ–
- æ˜¾ç¤ºæ€§èƒ½è¶‹åŠ¿
- å›å½’æ£€æµ‹

### 9.3 é«˜çº§è¿‡æ»¤

- æŒ‰æ€§èƒ½æŒ‡æ ‡è¿‡æ»¤ cases
- æŒ‰è¡¨è¾¾å¼æ¨¡å¼æœç´¢
- ç”¨è‡ªå®šä¹‰æ ‡ç­¾æ ‡è®° bundles

### 9.4 å¯¼å‡ºæ”¹è¿›

- å¯¼å‡ºå¯¹æ¯”æŠ¥å‘Š
- ä¸ºæ¯ä¸ª bundle/case ç”Ÿæˆ PDF æŠ¥å‘Š
- å°†ç«ç„°å›¾å¯¼å‡ºä¸º PNG

---

## 10. é™„å½•

### 10.1 YAML é…ç½® â†’ Bundle æ˜ å°„ç¤ºä¾‹

**YAML**: `bool/equal.yaml`
```yaml
cases:
  - name: bool_equal
    suites:
      - name: default
        data_configs: [balanced, skewed_9010]
        index_configs: [no_index, bitmap_index]
        expr_templates:
          - name: good_equal_true
            expr_template: good == true
```

**ç”Ÿæˆçš„ Bundle ç»“æ„**ï¼š
```
results/1704067200000/
â”œâ”€â”€ bundle_meta.json
â”œâ”€â”€ bundle_summary.txt
â”œâ”€â”€ all_results.csv
â””â”€â”€ cases/
    â””â”€â”€ 1704067200000_0/           # bool_equal case
        â”œâ”€â”€ case_meta.json
        â”œâ”€â”€ case_metrics.json
        â”œâ”€â”€ case_summary.txt
        â”œâ”€â”€ case_results.csv
        â””â”€â”€ flamegraphs/
            â”œâ”€â”€ 0001.svg           # balanced Ã— no_index Ã— good==true
            â”œâ”€â”€ 0002.svg           # balanced Ã— bitmap_index Ã— good==true
            â”œâ”€â”€ 0003.svg           # skewed_9010 Ã— no_index Ã— good==true
            â””â”€â”€ 0004.svg           # skewed_9010 Ã— bitmap_index Ã— good==true
```

### 10.2 API ç«¯ç‚¹æ‘˜è¦

| ç«¯ç‚¹ | æ–¹æ³• | æè¿° |
|------|------|------|
| `/api/index` | GET | åˆ—å‡ºæ‰€æœ‰ bundles |
| `/api/bundle/:id/meta` | GET | Bundle å…ƒæ•°æ® |
| `/api/bundle/:id/summary` | GET | Bundle æ‘˜è¦æ–‡æœ¬ |
| `/api/bundle/:id/case/:cid/meta` | GET | Case å…ƒæ•°æ® |
| `/api/bundle/:id/case/:cid/metrics` | GET | Case æŒ‡æ ‡ |
| `/api/bundle/:id/case/:cid/summary` | GET | Case æ‘˜è¦æ–‡æœ¬ |
| `/api/bundle/:id/case/:cid/assets/*` | GET | Case èµ„æºï¼ˆCSVã€ç«ç„°å›¾ï¼‰ |

### 10.3 æ–‡ä»¶å¤§å°ä¼°ç®—

å¯¹äºä¸€ä¸ªå…¸å‹çš„ bundleï¼ŒåŒ…å« 4 ä¸ª casesï¼Œæ¯ä¸ª case 8 ä¸ªæµ‹è¯•ï¼ˆæ€»è®¡ 32 ä¸ªæµ‹è¯•ï¼‰ï¼š

| æ–‡ä»¶ | é¢„è®¡å¤§å° |
|------|----------|
| bundle_meta.json | ~5 KB |
| bundle_summary.txt | ~2 KB |
| all_results.csv | ~10 KB |
| case_meta.jsonï¼ˆæ¯ä¸ª caseï¼‰ | ~2 KB |
| case_metrics.jsonï¼ˆæ¯ä¸ª caseï¼‰ | ~8 KB |
| case_summary.txtï¼ˆæ¯ä¸ª caseï¼‰ | ~1 KB |
| case_results.csvï¼ˆæ¯ä¸ª caseï¼‰ | ~3 KB |
| flamegraph.svgï¼ˆæ¯ä¸ªæµ‹è¯•ï¼‰ | ~100-500 KB |

**Bundle æ€»å¤§å°**ï¼š~50 KB + ç«ç„°å›¾ï¼ˆå˜åŒ–ï¼‰

---

## æ–‡æ¡£ä¿®è®¢å†å²

| ç‰ˆæœ¬ | æ—¥æœŸ | ä½œè€… | å˜æ›´ |
|------|------|------|------|
| 1.0 | 2025-01-12 | Initial | åˆ›å»ºåˆå§‹é‡æ„è®¡åˆ’ |
| 2.0 | 2025-01-12 | Update | æ”¹ä¸ºä¸­æ–‡ï¼Œç§»é™¤å‘åå…¼å®¹æ€§ |
