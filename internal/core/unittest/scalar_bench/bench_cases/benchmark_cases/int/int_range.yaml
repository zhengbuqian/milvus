version: 1
test_params:
  warmup_iterations: 30
  test_iterations: 30
  collect_memory_stats: false
  enable_flame_graph: false
  flamegraph_repo_path: ~/FlameGraph
suites:
  - name: low_card
    data_configs:
      - path: uniform_int64_low_card.yaml
    index_configs:
      - name: no_index
        field_configs: {}
      - name: bitmap_index
        field_configs:
          user_id:
            type: BITMAP
      - name: stl_sort_index
        field_configs:
          user_id:
            type: STL_SORT
      - name: inverted_index
        field_configs:
          user_id:
            type: INVERTED
    expr_templates:
      - name: user_id_range_1%
        expr_template: |
          query {
            is_count: true
            predicates {
              binary_range_expr {
                column_info {
                  field_id: {field_id:user_id}
                  data_type: Int64
                }
                lower_inclusive: false
                upper_inclusive: true
                lower_value { int64_val: 99 }
                upper_value { int64_val: 100 }
              }
            }
          }
      - name: user_id_range_10%
        expr_template: |
          query {
            is_count: true
            predicates {
              binary_range_expr {
                column_info {
                  field_id: {field_id:user_id}
                  data_type: Int64
                }
                lower_inclusive: true
                upper_inclusive: true
                lower_value { int64_val: 90 }
                upper_value { int64_val: 100 }
              }
            }
          }
      - name: user_id_range_50%
        expr_template: |
          query {
            is_count: true
            predicates {
              binary_range_expr {
                column_info {
                  field_id: {field_id:user_id}
                  data_type: Int64
                }
                lower_inclusive: true
                upper_inclusive: true
                lower_value { int64_val: 50 }
                upper_value { int64_val: 100 }
              }
            }
          }
      - name: user_id_range_99%
        expr_template: |
          query {
            is_count: true
            predicates {
              binary_range_expr {
                column_info {
                  field_id: {field_id:user_id}
                  data_type: Int64
                }
                lower_inclusive: true
                upper_inclusive: true
                lower_value { int64_val: 1 }
                upper_value { int64_val: 100 }
              }
            }
          }
  - name: med_card
    data_configs:
      - path: uniform_int64_med_card.yaml
    index_configs:
      - name: no_index
        field_configs: {}
      - name: bitmap_index
        field_configs:
          user_id:
            type: BITMAP
      - name: stl_sort_index
        field_configs:
          user_id:
            type: STL_SORT
      - name: inverted_index
        field_configs:
          user_id:
            type: INVERTED
    expr_templates:
      - name: user_id_range_1%
        expr_template: |
          query {
            is_count: true
            predicates {
              binary_range_expr {
                column_info {
                  field_id: {field_id:user_id}
                  data_type: Int64
                }
                lower_inclusive: false
                upper_inclusive: true
                lower_value { int64_val: 100 }
                upper_value { int64_val: 200 }
              }
            }
          }
      - name: user_id_range_10%
        expr_template: |
          query {
            is_count: true
            predicates {
              binary_range_expr {
                column_info {
                  field_id: {field_id:user_id}
                  data_type: Int64
                }
                lower_inclusive: true
                upper_inclusive: true
                lower_value { int64_val: 100 }
                upper_value { int64_val: 1100 }
              }
            }
          }
      - name: user_id_range_50%
        expr_template: |
          query {
            is_count: true
            predicates {
              binary_range_expr {
                column_info {
                  field_id: {field_id:user_id}
                  data_type: Int64
                }
                lower_inclusive: true
                upper_inclusive: true
                lower_value { int64_val: 100 }
                upper_value { int64_val: 5100 }
              }
            }
          }
      - name: user_id_range_99%
        expr_template: |
          query {
            is_count: true
            predicates {
              binary_range_expr {
                column_info {
                  field_id: {field_id:user_id}
                  data_type: Int64
                }
                lower_inclusive: true
                upper_inclusive: true
                lower_value { int64_val: 100 }
                upper_value { int64_val: 10000 }
              }
            }
          }
  - name: high_card
    data_configs:
      - path: uniform_int64_high_card.yaml
    index_configs:
      - name: no_index
        field_configs: {}
      - name: bitmap_index
        field_configs:
          user_id:
            type: BITMAP
      - name: stl_sort_index
        field_configs:
          user_id:
            type: STL_SORT
      - name: inverted_index
        field_configs:
          user_id:
            type: INVERTED
    expr_templates:
      - name: user_id_range_1%
        expr_template: |
          query {
            is_count: true
            predicates {
              binary_range_expr {
                column_info {
                  field_id: {field_id:user_id}
                  data_type: Int64
                }
                lower_inclusive: false
                upper_inclusive: true
                lower_value { int64_val: 100 }
                upper_value { int64_val: 3100 }
              }
            }
          }
      - name: user_id_range_10%
        expr_template: |
          query {
            is_count: true
            predicates {
              binary_range_expr {
                column_info {
                  field_id: {field_id:user_id}
                  data_type: Int64
                }
                lower_inclusive: true
                upper_inclusive: true
                lower_value { int64_val: 100 }
                upper_value { int64_val: 30100 }
              }
            }
          }
      - name: user_id_range_50%
        expr_template: |
          query {
            is_count: true
            predicates {
              binary_range_expr {
                column_info {
                  field_id: {field_id:user_id}
                  data_type: Int64
                }
                lower_inclusive: true
                upper_inclusive: true
                lower_value { int64_val: 100 }
                upper_value { int64_val: 150100 }
              }
            }
          }
      - name: user_id_range_99%
        expr_template: |
          query {
            is_count: true
            predicates {
              binary_range_expr {
                column_info {
                  field_id: {field_id:user_id}
                  data_type: Int64
                }
                lower_inclusive: true
                upper_inclusive: true
                lower_value { int64_val: 100 }
                upper_value { int64_val: 297000 }
              }
            }
          }